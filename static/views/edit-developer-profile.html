<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Edit Your Developer Profile | {{ .SiteName }}</title>
    <link href="/x/s/m/{{ .SiteLogoImageID }}?w=50&h=50" rel="shortcut icon">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
    <style>
body{background:#ffffff;}
input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}th{font-weight:600}td,th{border-bottom:1.08px solid #595959;overflow:auto;padding:14.85px 18px;text-align:left;vertical-align:top}thead th{border-bottom-width:2.16px;padding-bottom:6.3px}table{display:table;overflow-x:auto}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}fieldset{display:flex;flex-direction:row;flex-wrap:wrap}fieldset legend{margin:18px 0}input,textarea,select,button{border-radius:3.6px;display:inline-block;padding:9.9px}input+label,input+input[type="checkbox"],input+input[type="radio"],textarea+label,textarea+input[type="checkbox"],textarea+input[type="radio"],select+label,select+input[type="checkbox"],select+input[type="radio"],button+label,button+input[type="checkbox"],button+input[type="radio"]{page-break-before:always}input,select,label{margin-right:3.6px}textarea{min-height:90px;min-width:360px}label{display:inline-block;margin-bottom:12.6px}label+*{page-break-before:always}label>input{margin-bottom:0}input[type="submit"],input[type="reset"],button{background:#f2f2f2;color:#191919;cursor:pointer;display:inline;margin-bottom:18px;margin-right:7.2px;padding:6.525px 23.4px;text-align:center}input[type="submit"]:hover,input[type="reset"]:hover,button:hover{background:#d9d9d9;color:#000}input[type="submit"][disabled],input[type="reset"][disabled],button[disabled]{background:#e6e5e5;color:#403f3f;cursor:not-allowed}input[type="submit"],button[type="submit"]{background:{{ .PrimaryColor }};color:#fff}input[type="submit"]:hover,button[type="submit"]:hover{background:{{ .SecondaryColor }};color:#ffffff}input,select,textarea{margin-bottom:18px}input[type="text"],input[type="password"],input[type="email"],input[type="url"],input[type="phone"],input[type="tel"],input[type="number"],input[type="datetime"],input[type="date"],input[type="month"],input[type="week"],input[type="color"],input[type="time"],input[type="search"],input[type="range"],input[type="file"],input[type="datetime-local"],select,textarea{border:1px solid #d9d9d9;padding:5.4px 6.3px}input[type="checkbox"],input[type="radio"]{flex-grow:0;height:29.7px;margin-left:0;margin-right:9px;vertical-align:middle}input[type="checkbox"]+label,input[type="radio"]+label{page-break-before:avoid}select[multiple]{min-width:270px}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}pre,code,kbd,samp,var,output{font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:14.4px}pre{border-left:1.8px solid #59c072;line-height:25.2px;overflow:auto;padding-left:18px}pre code{background:none;border:0;line-height:29.7px;padding:0}code,kbd{background:#daf1e0;border-radius:3.6px;color:#2a6f3b;display:inline-block;line-height:18px;padding:3.6px 6.3px 2.7px}kbd{background:#2a6f3b;color:#fff}mark{background:#ffc;padding:0 3.6px}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}h1,h2,h3,h4,h5,h6{color:#000;margin-bottom:18px}h1{font-size:36px;font-weight:500;line-height:41.4px;margin-top:72px}h2{font-size:25.2px;font-weight:400;line-height:30.6px;margin-top:54px}h3{font-size:21.6px;line-height:27px;margin-top:36px}h4{font-size:18px;line-height:23.4px;margin-top:18px}h5{font-size:14.4px;font-weight:bold;line-height:21.6px;text-transform:uppercase}h6{color:#595959;font-size:14.4px;font-weight:bold;line-height:18px;text-transform:uppercase}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}a{color:{{ .PrimaryColor }};text-decoration:none}a:hover{text-decoration:underline}hr{border-bottom:1px solid #595959}figcaption,small{font-size:15.3px}figcaption{color:#595959}var,em,i{font-style:italic}dt,strong,b{font-weight:600}del,s{text-decoration:line-through}ins,u{text-decoration:underline}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}*{border:0;border-collapse:separate;border-spacing:0;box-sizing:border-box;margin:0;max-width:100%;outline:0;padding:0;vertical-align:baseline}html,body{width:100%}html{height:100%}body{color:#1a1919;}p,ul,ol,dl,blockquote,hr,pre,table,form,fieldset,figure,address{margin-bottom:29.7px}section{margin-left:auto;margin-right:auto;width:780px}article,header,footer{padding:43.2px}article{word-wrap: break-word;background:#fff;border:1px solid #d9d9d9;border-radius:7.2px}nav{text-align:center}nav ul{list-style:none;margin-left:0;text-align:center}nav ul li{display:inline-block;margin-left:9px;margin-right:9px;vertical-align:middle}nav ul li:last-child{margin-right:0}ol,ul{margin-left:31.5px}li dl,li ol,li ul{margin-bottom:0}dl{display:inline-block}dt{padding:0 18px}dd{padding:0 18px 4.5px}dd:last-of-type{border-bottom:1.08px solid #595959}dd+dt{border-top:1.08px solid #595959;padding-top:9px}blockquote{border-left:2.16px solid #595959;padding:4.5px 18px 4.5px 15.84px}blockquote footer{color:#595959;font-size:13.5px;margin:0}blockquote p{margin-bottom:0}img{height:auto;margin:0 auto}figure img{display:block}/*# sourceMappingURL=tacit-css-1.3.2.min.css.map */
.CodeMirror,.CodeMirror-scroll{min-height: 100px;}input{-webkit-appearance: none;-moz-appearance: none;appearance: none;}
.overlay-effect {width: 100%; height: 100%; position: fixed; top: 0; left: 0;background: rgba(0, 0, 0,0.5);z-index: 99999}
.spinner-box {z-index: 999999;width: 124px; padding: 30px; height: auto;position: fixed;margin: 5% auto; top: 40px; left: 0; right: 0;background: #fff;}
.lds-ring {display: inline-block; position: relative; width: 64px; height: 64px;}.lds-ring div {box-sizing: border-box; display: block; position: absolute; width: 51px; height: 51px; margin: 6px; border: 6px solid #000; border-radius: 50%; animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite; border-color: #000 transparent transparent transparent;}
.lds-ring div:nth-child(1) {animation-delay: -0.45s;}.lds-ring div:nth-child(2) {animation-delay: -0.3s;}.lds-ring div:nth-child(3) {animation-delay: -0.15s;}
@keyframes lds-ring {0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}#spinner-0{display: none;}input[type="checkbox"]{-webkit-appearance: checkbox;-moz-appearance: checkbox;appearance: checkbox;}
.search-suggestions{z-index:1;width:50%;border:1px solid #d9d9d9;position:absolute;background:#fff;border-radius:3.6px;}
.search-option{padding:5px 10px;}.search-option:hover{background:#d9d9d9;cursor:pointer;}
.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 2px;
}
#search-tag-suggestions {
    width: 200px;
    margin-top:-20px;
}
#search-tag {
    width: 200px;
}
.tag {
  display: inline-block;
  margin-top:10px;
  background: #dbdbdb;
  font-size:medium;
  padding: 4px 10px;
  border-radius:5px;
}
//croppr
  .croppr-container *{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}.croppr-container img{vertical-align:middle;max-width:100%}.croppr{position:relative;display:inline-block}.croppr-handle,.croppr-imageClipped,.croppr-overlay,.croppr-region{position:absolute;top:0}.croppr-overlay{background:rgba(0,0,0,.5);right:0;bottom:0;left:0;z-index:1;cursor:crosshair}.croppr-region{border:1px dashed rgba(0,0,0,.5);z-index:3;cursor:move}.croppr-imageClipped{right:0;bottom:0;left:0;z-index:2;pointer-events:none}.croppr-handle{border:1px solid #000;background-color:#fff;width:10px;height:10px;z-index:4}
footer{padding:10px;width:780px;margin:auto;}.subnav{width: 100%;text-align: left;float: left;font-size: 12pt;}.subnav ul {text-align:left;}.subnav ul li {width:90%;} @media only screen and (max-witdh: 768px) {.subnav ul li {width: 100%;}}
    .menu-header{text-align:left;width: 100%;margin:20px auto;border-bottom:1px solid #d9d9d9;}.menu-header a {white-space:pre;color: black;font-size: 12pt;font-weight: bold;padding-right: 5px;}header{padding:0 10px;width:780px;margin:auto;}

#add-tag-btn {
      background: {{ .PrimaryColor }};
      color: #fff;
}
#add-tag-btn:hover {
      background: {{ .SecondaryColor }};
      color: #fff;
}
.tags-container {
    margin-bottom:10px;
}
.tags-container .tag:hover {
    cursor: pointer;
    background-color: rgb(211, 63, 53);
}

.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  top: 0;
  left: 0;
  z-index: 9999; /* Sit on top */
  width: 100%;
  height: 100%;
  overflow: auto; /* Enable scroll if needed */
  background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  max-width: 500px;
  width: 80%; /* Could be more or less, depending on screen size */
  text-align: center;
}

/* Center input elements */
.modal-content input[type="text"],
.modal-content input[type="hidden"],
.modal-content textarea {
  display: block;
  margin: 0 auto;
  width: 80%;
  max-width: 400px;
  margin-bottom: 10px;
  resize: none;
}

/* Center buttons */
.modal-content button {
  display: block;
  margin: 20px auto 0;
}

#cancelBtn, #saveBtn {
    background: {{ .PrimaryColor }};
    color: #fff;
    display:inline-block;
    margin-right: 5px;
    margin-left: 5px;
}
#cancelBtn {
    background: #ff0000;
}
#saveBtn:hover {
    background: {{ .SecondaryColor }};
    color: #fff;
}
#cancelBtn:hover {
	background: #ff7f7f;
	color: #fff;
}

/* Close button */
.close {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 24px;
  font-weight: bold;
  color: #aaa;
}

/* Hover styles for close button */
.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}
#submit {
	position: relative;
	margin-bottom: 18px;
	border-bottom: 18px;
}

</style>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script defer data-domain="golang.cafe" src="https://scalajobs.com/js/index.js"></script>
    {{ template "google-analytics" }}
  </head>
  <body>
    {{ template "header-html" . }}
    <div id="spinner-0">
      <div class="overlay-effect"></div>
      <div class="spinner-box"><div class="lds-ring"><div></div><div></div><div></div><div></div></div></div>
    </div>
    <section>
      <article>
        <p>
        <h3>Your Profile is Live on {{ .SiteName }}</h3>
        <small>
          <b>Created:</b> {{ .DeveloperProfile.CreatedAt.Format "Jan 02, 2006 15:04:05 UTC" }}<br>
          <b>Last Updated:</b> {{ .DeveloperProfile.UpdatedAt.Format "Jan 02, 2006 15:04:05 UTC" }}<br>
          <b>View Profile:</b> <a href="/developer/{{ .DeveloperProfile.Slug }}" rel="noopener noreferrer" target="_blank">https://{{ .SiteHost }}/developer/{{ .DeveloperProfile.Slug }}</a>
        </small><br><br>
        </p>
      </article>
      <article style="margin-top: 30px; margin-bottom: 10px;">
        <p>
        <h3>Edit Your Developer Profile</h3>
        <input type="hidden" name="profile-id" id="profile-id" value="{{ .DeveloperProfile.ID }}"><br>
        <input type="text" name="full-name" id="full-name" placeholder="Full Name" style="width: 100%;" value="{{ .DeveloperProfile.Name }}"><br>
        <input type="text" name="location" id="location" placeholder="Job Location" style="width: 100%;" value="{{ .DeveloperProfile.Location }}"><br>
        <input type="number" name="hourly-rate" id="hourly-rate" placeholder="Hourly Rate in USD" style="width: 10%;" value="{{ if ne .DeveloperProfile.HourlyRate 0 }}{{ .DeveloperProfile.HourlyRate }}{{ end }}"> USD/hour<br>
        <input type="url" name="linkedin-url" id="linkedin-url" placeholder="Linkedin URL" style="width: 100%;" value="{{ .DeveloperProfile.LinkedinURL }}"><br>
        <div>
          <label for="profile-image" style="float: left;cursor: pointer;background: {{ .PrimaryColor }};color: #fff;padding: 6.525px 23.4px;border-radius: 3.6px;">Upload Profile Image</label>
          <div style="margin-bottom: 10px;float:left; width:100%;">
            <img id="profile-image-preview" src="/x/s/m/{{ .DeveloperProfile.ImageID }}" alt="profile-image" style="max-width:50%;cursor: pointer;float: left;"/>
          </div>
          <input type="file" name="profile-image" id="profile-image" placeholder="Profile Image" style="visibility: hidden; width: 0; height: 0;">
          <div class="clearfix"></div>
        </div>
        <br>
        <input type="hidden" name="profile-image-id" id="profile-image-id" value="{{ .DeveloperProfile.ImageID }}">
        </div>
        <span>Search Status</span>
        <select name="search-status" id="search-status" style="height: 42px;">
          {{ if eq .DeveloperProfile.SearchStatus "actively-applying" }}
          <option value="actively-applying" selected>Actively Applying</option>
          <option value="casually-looking">Casually Looking</option>
          <option value="not-available">Not Available</option>
          {{ end }}
          {{ if eq .DeveloperProfile.SearchStatus "casually-looking" }}
          <option value="actively-applying">Actively Applying</option>
          <option value="casually-looking" selected>Casually Looking</option>
          <option value="not-available">Not Available</option>
          {{ end }}
          {{ if eq .DeveloperProfile.SearchStatus "not-available" }}
          <option value="actively-applying">Actively Applying</option>
          <option value="casually-looking">Casually Looking</option>
          <option value="not-available" selected>Not Available</option>
          {{ end }}
        </select></br />
        <span>Role Level</span>
        <select name="role-level" id="role-level" style="height: 42px;">
          {{ if eq .DeveloperProfile.RoleLevel "junior" }}
          <option value="junior" selected>Junior</option>
          <option value="mid-level">Mid-Level</option>
          <option value="senior">Senior</option>
          <option value="lead">Lead/Staff Engineer</option>
          <option value="c-level">C-Level</option>
          {{ end }}
          {{ if eq .DeveloperProfile.RoleLevel "mid-level" }}
          <option value="junior">Junior</option>
          <option value="mid-level" selected>Mid-Level</option>
          <option value="senior">Senior</option>
          <option value="lead">Lead/Staff Engineer</option>
          <option value="c-level">C-Level</option>
          {{ end }}
          {{ if eq .DeveloperProfile.RoleLevel "senior" }}
          <option value="junior">Junior</option>
          <option value="mid-level">Mid-Level</option>
          <option value="senior" selected>Senior</option>
          <option value="lead">Lead/Staff Engineer</option>
          <option value="c-level">C-Level</option>
          {{ end }}
          {{ if eq .DeveloperProfile.RoleLevel "lead" }}
          <option value="junior">Junior</option>
          <option value="mid-level">Mid-Level</option>
          <option value="senior">Senior</option>
          <option value="lead" selected>Lead/Staff Engineer</option>
          <option value="c-level">C-Level</option>
          {{ end }}
          {{ if eq .DeveloperProfile.RoleLevel "c-level" }}
          <option value="junior">Junior</option>
          <option value="mid-level">Mid-Level</option>
          <option value="senior">Senior</option>
          <option value="lead">Lead/Staff Engineer</option>
          <option value="c-level" selected>C-Level</option>
          {{ end }}
        </select>
        <textarea id="bio" placeholder="Short Bio" style="resize:none; width: 100%;overflow: hidden;min-height: 100px;" oninput="auto_grow(this);">{{ .DeveloperProfile.Bio }}</textarea><br>
        <div id="search-tag-container">
            <input type="hidden" name="tags" id="tags" value="{{ .DeveloperProfile.Skills }}">
            <input autocomplete="off" type="text" placeholder="Skills" id="search-tag">
              <button onclick="addSkillTag()" disabled id="add-tag-btn">Add</button>
        <div style="z-index:1000;display:none;" id="search-tag-suggestions" class="search-suggestions">
        </div>
        </div>
        <p id="skills-{{ .DeveloperProfile.ID }}" class="tags-container">
            {{ range $x, $y := .DeveloperProfile.SkillsArray }}
              <span class="tag" onclick="deleteTag('{{ $y }}');">{{ $y }}</span>
            {{ end }}
        </p>
        <input type="email" name="email" disabled id="email" placeholder="Your Email" style="width: 100%;" value="{{ .DeveloperProfile.Email }}"><br>
        <span id="experience">
          <b>Experience</b>
        </span>
        <div onclick="openDeveloperMetadataModal('experience');" style="float:right; cursor: pointer;text-decoration: underline;">
          Add
        </div>
        <br />
        <ul>
          {{ range $i, $j := .DeveloperExperiences}}
          <br />
          <li><div><b><a href="{{ .Link }}" target="_blank">{{ .Title }}</a></b>
            <div onclick="openDeveloperMetadataModal('experience', '{{ .Title }}', '{{ .Description }}', '{{ .Link }}', '{{ .ID }}');" style="float:right; cursor: pointer;text-decoration: underline;margin-left:10px;font-size:10pt;">Edit</div>
            <div onclick="deleteDeveloperMetadata('{{ .ID }}');" style="float:right; cursor: pointer;text-decoration: underline;font-size:10pt;">Delete</div>
          </div>
            <div>{{ .Description }}</div>
            <br>
          </li>
          {{ end }}
         </ul>
        <span>
        	<b>Education</b>
        </span>
        <div onclick="openDeveloperMetadataModal('education');" style="float:right; cursor: pointer;text-decoration: underline;">
          Add
        </div>
        <br />
        <ul>
        {{ range $i, $j := .DeveloperEducation}}
        <br />
          <li>
            <div><b><a href="{{ .Link }}" target="_blank">{{ .Title }}</a></b>
              <div onclick="openDeveloperMetadataModal('education', '{{ .Title }}', '{{ .Description }}', '{{ .Link }}', '{{ .ID }}');" style="float:right; cursor: pointer;text-decoration: underline;margin-left:10px;font-size:10pt;">Edit</div>
              <div onclick="deleteDeveloperMetadata('{{ .ID }}');" style="float:right; cursor: pointer;text-decoration: underline;font-size:10pt;">Delete</div>
            </div>
            <div>{{ .Description }} </div></li>
          <br>
        {{ end }}
        </ul>
        <span>
        	<b>Github Projects</b>
        </span>
        <div onclick="openDeveloperMetadataModal('github');" style="float:right; cursor: pointer;text-decoration: underline;">
          Add
        </div>
        <br />
        <ul>
        {{ range $i, $j := .DeveloperGithubProjects}}
        <br />
          <li><div><b><a href="{{ .Link }}">{{ .Title }}</a></b>
            <div onclick="openDeveloperMetadataModal('github', '{{ .Title }}', '{{ .Description }}', '{{ .Link }}', '{{ .ID }}');" style="float:right; cursor: pointer;text-decoration: underline;margin-left:10px;font-size:10pt;">Edit</div>
            <div onclick="deleteDeveloperMetadata('{{ .ID }}');" style="float:right; cursor: pointer;text-decoration: underline;font-size:10pt;">Delete</div>
          </div>
          <div>{{ .Description }} </div></li>
          <br>
        {{ end }}
        </ul>
        <div id="developerMetadataModal" class="modal">
          <div class="modal-content">
            <span onclick="closeModal()" class="close">&times;</span>
            <h2 id="modalHeader">Add New Item</h2>
            <form>
              <input type="hidden" id="metadataId">
              <input type="hidden" id="metadataType">
              <input type="text" id="title" placeholder="Senior Software Engineer @PiedPiper" name="title"><br>
              <textarea id="description" name="description" placeholder="At Pied Piper, I served as a senior software engineer ..."></textarea><br>
              <input type="text" id="link" name="link" placeholder="https://piedpiper.com">
              <button type="button" onclick="closeModal()" id="cancelBtn">Cancel</button>
              <button type="button" onclick="saveDeveloperMetadata()" id="saveBtn">Save</button>
            </form>
          </div>
        </div>

        <input type="submit" id="submit" value="Update" onclick="update();" style="margin-right:0px;float: right;"><br>
        </p>
      </article>
    </section>
    <footer>
      <nav>
        <small>
          <a href="/">{{ .SiteName }}</a> &bull;
          <a href="/support">Support</a> &bull;
          <a href="/terms-of-service">T&Cs</a>
          <br>
        </small>
      </nav>
    </footer>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script>
      !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Croppr=e()}(this,function(){"use strict";function t(t){t.addEventListener("touchstart",e),t.addEventListener("touchend",e),t.addEventListener("touchmove",e)}function e(t){t.preventDefault();var e=t.changedTouches[0],i={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};e.target.dispatchEvent(new MouseEvent(i[t.type],{bubbles:!0,cancelable:!0,view:window,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY}))}function i(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),o=Math.max(0,16-(n-t)),s=window.setTimeout(function(){e(n+o)},o);return t=n+o,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}return"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}(),function(t){function e(e,i){i=i||{bubbles:!1,cancelable:!1};var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,i.bubbles,i.cancelable,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n}try{return new CustomEvent("test"),!1}catch(t){}e.prototype=Event.prototype,t.MouseEvent=e}(window);var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},h=function(){function t(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function t(e,i,o,s){function r(t){t.stopPropagation(),document.addEventListener("mouseup",a),document.addEventListener("mousemove",h),l.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:l}}))}function a(t){t.stopPropagation(),document.removeEventListener("mouseup",a),document.removeEventListener("mousemove",h),l.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{handle:l}}))}function h(t){t.stopPropagation(),l.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}n(this,t);var l=this;this.position=e,this.constraints=i,this.cursor=o,this.eventBus=s,this.el=document.createElement("div"),this.el.className="croppr-handle",this.el.style.cursor=o,this.el.addEventListener("mousedown",r)},u=function(){function t(e,i,o,s){n(this,t),this.x1=e,this.y1=i,this.x2=o,this.y2=s}return o(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.x1=null==t?this.x1:t,this.y1=null==e?this.y1:e,this.x2=null==i?this.x2:i,this.y2=null==n?this.y2:n,this}},{key:"width",value:function(){return Math.abs(this.x2-this.x1)}},{key:"height",value:function(){return Math.abs(this.y2-this.y1)}},{key:"resize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],n=this.x1+this.width()*i[0],o=this.y1+this.height()*i[1];return this.x1=n-t*i[0],this.y1=o-e*i[1],this.x2=this.x1+t,this.y2=this.y1+e,this}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],i=this.width()*t,n=this.height()*t;return this.resize(i,n,e),this}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.width(),n=this.height();return t=null===t?this.x1:t,e=null===e?this.y1:e,this.x1=t,this.y1=e,this.x2=t+i,this.y2=e+n,this}},{key:"getRelativePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=this.width()*t[0],i=this.height()*t[1];return[e,i]}},{key:"getAbsolutePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=this.x1+this.width()*t[0],i=this.y1+this.height()*t[1];return[e,i]}},{key:"constrainToRatio",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"height";if(null!==t){this.width(),this.height();switch(i){case"height":this.resize(this.width(),this.width()*t,e);break;case"width":this.resize(1*this.height()/t,this.height(),e);break;default:this.resize(this.width(),this.width()*t,e)}return this}}},{key:"constrainToBoundary",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],n=this.getAbsolutePoint(i),o=h(n,2),s=o[0],r=o[1],a=s,l=r,u=t-s,d=e-r,c=-2*i[0]+1,p=-2*i[1]+1,v=null,m=null;switch(c){case-1:v=a;break;case 0:v=2*Math.min(a,u);break;case 1:v=u}switch(p){case-1:m=l;break;case 0:m=2*Math.min(l,d);break;case 1:m=d}if(this.width()>v){var f=v/this.width();this.scale(f,i)}if(this.height()>m){var g=m/this.height();this.scale(g,i)}return this}},{key:"constrainToSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(s&&(s>1?(t=1*e/s,n*=s):s<1&&(e=t*s,i=1*n/s)),t&&this.width()>t){var r=t,a=null===s?this.height():e;this.resize(r,a,o)}if(e&&this.height()>e){var h=null===s?this.width():t,l=e;this.resize(h,l,o)}if(i&&this.width()<i){var u=i,d=null===s?this.height():n;this.resize(u,d,o)}if(n&&this.height()<n){var c=null===s?this.width():i,p=n;this.resize(c,p,o)}return this}}]),t}(),d=[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}],c=function(){function e(t,i){var o=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n(this,e),this.options=e.parseOptions(i||{}),!t.nodeName&&(t=document.querySelector(t),null==t))throw"Unable to find element.";if(!t.getAttribute("src"))throw"Image src not provided.";this._initialized=!1,this._restore={parent:t.parentNode,element:t},s||(0===t.width||0===t.height?t.onload=function(){o.initialize(t)}:this.initialize(t))}return o(e,[{key:"initialize",value:function(t){this.createDOM(t),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this._initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)}},{key:"createDOM",value:function(e){this.containerEl=document.createElement("div"),this.containerEl.className="croppr-container",this.eventBus=this.containerEl,t(this.containerEl),this.cropperEl=document.createElement("div"),this.cropperEl.className="croppr",this.imageEl=document.createElement("img"),this.imageEl.setAttribute("src",e.getAttribute("src")),this.imageEl.setAttribute("alt",e.getAttribute("alt")),this.imageEl.className="croppr-image",this.imageClippedEl=this.imageEl.cloneNode(),this.imageClippedEl.className="croppr-imageClipped",this.regionEl=document.createElement("div"),this.regionEl.className="croppr-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="croppr-overlay";var i=document.createElement("div");i.className="croppr-handleContainer",this.handles=[];for(var n=0;n<d.length;n++){var o=new l(d[n].position,d[n].constraints,d[n].cursor,this.eventBus);this.handles.push(o),i.appendChild(o.el)}this.cropperEl.appendChild(this.imageEl),this.cropperEl.appendChild(this.imageClippedEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(i),this.containerEl.appendChild(this.cropperEl),e.parentElement.replaceChild(this.containerEl,e)}},{key:"setImage",value:function(t){var e=this;return this.imageEl.onload=function(){e.box=e.initializeBox(e.options),e.redraw()},this.imageEl.src=t,this.imageClippedEl.src=t,this}},{key:"destroy",value:function(){this._restore.parent.replaceChild(this._restore.element,this.containerEl)}},{key:"initializeBox",value:function(t){var e=t.startSize.width,i=t.startSize.height,n=new u(0,0,e,i);n.constrainToRatio(t.aspectRatio,[.5,.5]);var o=t.minSize,s=t.maxSize;n.constrainToSize(s.width,s.height,o.width,o.height,[.5,.5],t.aspectRatio);var r=this.cropperEl.offsetWidth,a=this.cropperEl.offsetHeight;n.constrainToBoundary(r,a,[.5,.5]);var h=this.cropperEl.offsetWidth/2-n.width()/2,l=this.cropperEl.offsetHeight/2-n.height()/2;return n.move(h,l),n}},{key:"redraw",value:function(){var t=this,e=Math.round(this.box.width()),i=Math.round(this.box.height()),n=Math.round(this.box.x1),o=Math.round(this.box.y1),s=Math.round(this.box.x2),r=Math.round(this.box.y2);window.requestAnimationFrame(function(){t.regionEl.style.transform="translate("+n+"px, "+o+"px)",t.regionEl.style.width=e+"px",t.regionEl.style.height=i+"px",t.imageClippedEl.style.clip="rect("+o+"px, "+s+"px, "+r+"px, "+n+"px)";for(var a=t.box.getAbsolutePoint([.5,.5]),h=a[0]-t.cropperEl.offsetWidth/2>>31,l=a[1]-t.cropperEl.offsetHeight/2>>31,u=(h^l)+l+l+4,d=-2*u+8,c=0;c<t.handles.length;c++){var p=t.handles[c],v=p.el.offsetWidth,m=p.el.offsetHeight,f=n+e*p.position[0]-v/2,g=o+i*p.position[1]-m/2;p.el.style.transform="translate("+Math.round(f)+"px, "+Math.round(g)+"px)",p.el.style.zIndex=d==c?5:4}})}},{key:"attachHandlerEvents",value:function(){var t=this.eventBus;t.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),t.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),t.addEventListener("handleend",this.onHandleMoveEnd.bind(this))}},{key:"attachRegionEvents",value:function(){function t(t){t.stopPropagation(),document.addEventListener("mouseup",i),document.addEventListener("mousemove",e),n.dispatchEvent(new CustomEvent("regionstart",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function e(t){t.stopPropagation(),n.dispatchEvent(new CustomEvent("regionmove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function i(t){t.stopPropagation(),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",e),n.dispatchEvent(new CustomEvent("regionend",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}var n=this.eventBus;this.regionEl.addEventListener("mousedown",t),n.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),n.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),n.addEventListener("regionend",this.onRegionMoveEnd.bind(this))}},{key:"attachOverlayEvents",value:function(){function t(t){t.stopPropagation(),document.addEventListener("mouseup",i),document.addEventListener("mousemove",e);var r=o.cropperEl.getBoundingClientRect(),a=t.clientX-r.left,h=t.clientY-r.top;s=o.box,o.box=new u(a,h,a+1,h+1),o.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:o.handles[n]}}))}function e(t){t.stopPropagation(),o.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function i(t){return t.stopPropagation(),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",e),1===o.box.width()&&1===o.box.height()?void(o.box=s):void o.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}var n=4,o=this,s=null;this.overlayEl.addEventListener("mousedown",t)}},{key:"onHandleMoveStart",value:function(t){var e=t.detail.handle,i=[1-e.position[0],1-e.position[1]],n=this.box.getAbsolutePoint(i),o=h(n,2),s=o[0],r=o[1];this.activeHandle={handle:e,originPoint:i,originX:s,originY:r},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onHandleMoveMoving",value:function(t){var e=t.detail,i=e.mouseX,n=e.mouseY,o=this.cropperEl.getBoundingClientRect();i-=o.left,n-=o.top,i<0?i=0:i>o.width&&(i=o.width),n<0?n=0:n>o.height&&(n=o.height);var s=this.activeHandle.originPoint.slice(),r=this.activeHandle.originX,a=this.activeHandle.originY,h=this.activeHandle.handle,l=1===h.constraints[0],d=1===h.constraints[1],c=1===h.constraints[2],p=1===h.constraints[3],v=(p||d)&&(l||c),m=p||d?r:this.box.x1,f=p||d?r:this.box.x2,g=l||c?a:this.box.y1,E=l||c?a:this.box.y2;m=p?i:m,f=d?i:f,g=l?n:g,E=c?n:E;var w=!1,y=!1;if((p||d)&&(w=p?i>r:i<r),(l||c)&&(y=l?n>a:n<a),w){var b=m;m=f,f=b,s[0]=1-s[0]}if(y){var x=g;g=E,E=x,s[1]=1-s[1]}var C=new u(m,g,f,E);if(this.options.aspectRatio){var z=this.options.aspectRatio,M=!1;v?M=n>C.y1+z*C.width()||n<C.y2-z*C.width():(l||c)&&(M=!0);var S=M?"width":"height";C.constrainToRatio(z,s,S)}var k=this.options.minSize,R=this.options.maxSize;C.constrainToSize(R.width,R.height,k.width,k.height,s,this.options.aspectRatio);var P=this.cropperEl.offsetWidth,O=this.cropperEl.offsetHeight;C.constrainToBoundary(P,O,s),this.box=C,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onHandleMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"onRegionMoveStart",value:function(t){var e=t.detail,i=e.mouseX,n=e.mouseY,o=this.cropperEl.getBoundingClientRect();i-=o.left,n-=o.top,this.currentMove={offsetX:i-this.box.x1,offsetY:n-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onRegionMoveMoving",value:function(t){var e=t.detail,i=e.mouseX,n=e.mouseY,o=this.currentMove,s=o.offsetX,r=o.offsetY,a=this.cropperEl.getBoundingClientRect();i-=a.left,n-=a.top,this.box.move(i-s,n-r),this.box.x1<0&&this.box.move(0,null),this.box.x2>a.width&&this.box.move(a.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>a.height&&this.box.move(null,a.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onRegionMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"getValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.options.returnMode),"real"==t){var e=this.imageEl.naturalWidth,n=this.imageEl.naturalHeight,o=this.imageEl.getBoundingClientRect(),s=o.width,r=o.height,a=e/s,h=n/r;return{x:Math.round(this.box.x1*a),y:Math.round(this.box.y1*h),width:Math.round(this.box.width()*a),height:Math.round(this.box.height()*h)}}if("ratio"==t){var l=this.imageEl.getBoundingClientRect(),u=l.width,d=l.height;return{x:i(this.box.x1/u,3),y:i(this.box.y1/d,3),width:i(this.box.width()/u,3),height:i(this.box.height()/d,3)}}if("raw"==t)return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}}}],[{key:"parseOptions",value:function(t){var e={aspectRatio:null,maxSize:{width:null,height:null},minSize:{width:null,height:null},startSize:{width:100,height:100,unit:"%"},returnMode:"real",onInitialize:null,onCropStart:null,onCropMove:null,onCropEnd:null},i=null;void 0!==t.aspectRatio&&("number"==typeof t.aspectRatio?i=t.aspectRatio:t.aspectRatio instanceof Array&&(i=t.aspectRatio[1]/t.aspectRatio[0]));var n=null;void 0!==t.maxSize&&null!==t.maxSize&&(n={width:t.maxSize[0]||null,height:t.maxSize[1]||null,unit:t.maxSize[2]||"px"});var o=null;void 0!==t.minSize&&null!==t.minSize&&(o={width:t.minSize[0]||null,height:t.minSize[1]||null,unit:t.minSize[2]||"px"});var s=null;void 0!==t.startSize&&null!==t.startSize&&(s={width:t.startSize[0]||null,height:t.startSize[1]||null,unit:t.startSize[2]||"%"});var r=null;"function"==typeof t.onInitialize&&(r=t.onInitialize);var a=null;"function"==typeof t.onCropStart&&(a=t.onCropStart);var h=null;"function"==typeof t.onCropEnd&&(h=t.onCropEnd);var l=null;"function"==typeof t.onUpdate&&(console.warn("Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead."),l=t.onUpdate),"function"==typeof t.onCropMove&&(l=t.onCropMove);var u=null;if(void 0!==t.returnMode){var d=t.returnMode.toLowerCase();if(["real","ratio","raw"].indexOf(d)===-1)throw"Invalid return mode.";u=d}var c=function(t){for(var e=t.offsetWidth,i=t.offsetHeight,n=["maxSize","minSize","startSize"],o=0;o<n.length;o++){var s=n[o];null!==this[s]&&("%"==this[s].unit&&(null!==this[s].width&&(this[s].width=this[s].width/100*e),null!==this[s].height&&(this[s].height=this[s].height/100*i)),delete this[s].unit)}},p=function(t,e){return null!==t?t:e};return{aspectRatio:p(i,e.aspectRatio),maxSize:p(n,e.maxSize),minSize:p(o,e.minSize),startSize:p(s,e.startSize),returnMode:p(u,e.returnMode),onInitialize:p(r,e.onInitialize),onCropStart:p(a,e.onCropStart),onCropMove:p(l,e.onCropMove),onCropEnd:p(h,e.onCropEnd),convertToPixels:c}}}]),e}(),p=function(t){function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,o))}return r(e,t),o(e,[{key:"getValue",value:function(t){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getValue",this).call(this,t)}},{key:"setImage",value:function(t){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setImage",this).call(this,t)}},{key:"destroy",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"moveTo",value:function(t,e){return this.box.move(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"resizeTo",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];return this.box.resize(t,e,i),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"scaleBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];return this.box.scale(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"reset",value:function(){return this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}}]),e}(c);return p});
    </script>
    <script>
      const tagsContainer = document.getElementsByClassName('tags-container')[0];
      const addTagBtn = document.getElementById('add-tag-btn');
      var getJSON = function(uri, cb) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', uri, true);
          xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
          xhr.send();
          xhr.onreadystatechange = function() {
              if (xhr.readyState === 4) {
                  cb(xhr.status, JSON.parse(xhr.responseText));
              }
          }
      };

      document
          .getElementById('search-tag')
          .addEventListener('keyup', function(event) {
                        addTagBtn.disabled = true;
              event.preventDefault();
              if (event.keyCode != 13) {
      document.getElementById('search-tag-suggestions').style.display = 'none';
      getJSON('/x/skill/autocomplete?k='+document.getElementById('search-tag').value.trim(), function(status, res) {
        if (status == 200 && typeof res != 'undefined') {
          var suggestions = '';
          for (var item of res) {
            suggestions += '<div class="search-option" id="tag-option-'+item.name+'" data-val="'+item.name+'">'+item.name+'</div>';
          }
          if (suggestions != '') {
            document.getElementById('search-tag-suggestions').innerHTML = suggestions;
            for (var item of res) {
            document.getElementById('tag-option-'+item.name).addEventListener('click', function(e) {
              document.getElementById('search-tag').value = e.target.outerText;
              document.getElementById('search-tag-suggestions').style.display = 'none';
              addTagBtn.disabled = false;
            });
            }
            document.getElementById('search-tag-suggestions').style.display = 'block';
          }
        }
      })
                  return;
              }
          });

      // Add a tag to the container
      function addTag(tag) {
        var tags = document.getElementById("tags").value.split(",");
        var tagsArray = [];
        for (index in tags) {
            element = tags[index].trim()
            if (element) {
                tagsArray.push(element)
            }
        }
        if (tagsArray.indexOf(tag) === -1) {
            tagsArray.push(tag);
            document.getElementById("tags").value = tagsArray.join(",");
        }
        let spans = tagsContainer.getElementsByTagName("span");
        for (let span of spans) {
           if (tag === span.textContent) {
              return
          };
        }
        const tagElement = document.createElement('span');
        tagElement.classList.add('tag');
        tagElement.textContent = tag;
        tagElement.addEventListener('click', function(e) {
          deleteTag(e.target.textContent);
        })
        tagsContainer.appendChild(tagElement);
      }
      function deleteTag(tag) {
        var tags = document.getElementById("tags").value.split(",");
        var tagsArray = [];
        for (index in tags) {
            element = tags[index].trim()
            if (element) {
                tagsArray.push(element)
            }
        }
        if (tagsArray.indexOf(tag.trim()) != -1) {
          tagsArray.splice(tagsArray.indexOf(tag.trim()), 1);
          document.getElementById("tags").value = tagsArray.join(",");
        }
        let spans = tagsContainer.getElementsByTagName("span");
        for (let span of spans) {
           if (tag === span.textContent) {
             span.remove();
          };
        }
      }

      function isEmail(email) {
              var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
              return re.test(email);
            }
      function isURL(value) {
              return /^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value);
            }
      function isEmail(email) {
              var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
              return re.test(email);
            }
      function addSkillTag() {
          const tagsInput = document.getElementById('search-tag');
          const tag = tagsInput.value.trim();
          if (tag) {
              addTag(tag);
              tagsInput.value = '';
          }
      }
      function disapprove() {
              sendReq('/x/ddp', true);
            }
      function update() {
              sendReq('/x/udp');
            }
      function auto_grow(element) {
              element.style.height = "5px";
              element.style.height = (element.scrollHeight)+"px";
            }
      function sendReq(url, isDelete) {
              var fullName = document.getElementById("full-name").value;
              var currentLocation = document.getElementById("location").value;
              var hourlyRate = document.getElementById("hourly-rate").value;
              var linkedinURL = document.getElementById("linkedin-url").value;
              var email = document.getElementById("email").value;
              var bio = document.getElementById("bio").value;
              var tags = document.getElementById("tags").value;
              var searchStatus = document.getElementById("search-status").value;
              var roleLevel = document.getElementById("role-level").value;
              if (empty(fullName, currentLocation, linkedinURL, bio, tags, email)) {
                      alert('Please fill all the mandatory fields');
                      return;
                    }
              if (empty(hourlyRate) || hourlyRate == "0") {
                  alert("Please specify a valid hourly rate in USD");
                return;
              }
              if (!validSkills(tags)) {
				alert('Skills is too long. Please use 10 skills or less');
				return;
			}
              if (!isURL(linkedinURL)) {
                      alert('"How To Apply" must be either an email address or a URL');
                      return;
                    }
              if (!isEmail(email)) {
                      alert('Your email is not valid');
                      return;
                    }
              document.getElementById("spinner-0").style.display = "block";
              var hasFiles = false;
              if (document.getElementById('profile-image') && document.getElementById('profile-image').files) {
                      var hasFiles = document.getElementById('profile-image').files.length > 0;
                    }
              if (isDelete) {
                      httpReq(url, {image_id: document.getElementById("profile-image-id").value, id: document.getElementById('profile-id').value, email: email}, function(bool) {
                              document.getElementById("spinner-0").style.display = "none";
                              alert('Profile Delete Successfully');
                              window.location.href="/";
                            })
                      return;
                    }
              if (!hasFiles) {
                      httpReq(
                              url,
                              {
                                      id: document.getElementById('profile-id').value,
                                      fullname: fullName,
                                      current_location: currentLocation,
                                      bio: bio,
                                      hourly_rate: hourlyRate,
                                      linkedin_url: linkedinURL,
                                      email: email,
                                      skills: tags,
                                      search_status: searchStatus,
                                      role_level: roleLevel,
                                      profile_image_id: document.getElementById("profile-image-id").value
                                    },
                              function(bool) {
                                      document.getElementById("spinner-0").style.display = "none";
                                      if (bool) {
                                              alert('Profile Updated Successfully');
                                              window.location.reload();
                                            } else alert('Woops there was a problem updating the profile');
                                    }
                            );
                    } else {
                            // update existing image
                            var mediaFile = document.getElementById('profile-image').files[0];
                            var formData = new FormData();
                            var cropValues = cropInstance.getValue();
                            console.log(cropValues);
                            formData.append('image', mediaFile);
                            var xhr = new XMLHttpRequest();
                            xhr.open('POST', '/x/s/m?x='+cropValues.x+'&y='+cropValues.y+'&w='+cropValues.width+'&h='+cropValues.height, true);
                            xhr.send(formData);
                            xhr.onreadystatechange = function() {
                                    if (xhr.readyState === 4) {
                                        var profileIconId = "";
                                            if (xhr.status !== 200) {
                                                    alert('There was an error while uploading profile image');
                                                    document.getElementById("spinner-0").style.display = "none";
                                                    return;
                                                  }
                                      var res = JSON.parse(xhr.response);
                                      profileIconId = res.id;
                                            httpReq(
                                                    url,
                                                    {
                                                            id: document.getElementById('profile-id').value,
                                                            fullname: fullName,
                                                            current_location: currentLocation,
                                                            bio: bio,
                                                            hourly_rate: hourlyRate,
                                                            linkedin_url: linkedinURL,
                                                            email: email,
                                                            skills: tags,
                                                            search_status: searchStatus,
                                                            role_level: roleLevel,
                                                            profile_image_id: profileIconId,
                                                          },
                                                    function(bool) {
                                                            document.getElementById("spinner-0").style.display = "none";
                                                            if (bool) {
                                                                    alert('Profile Updated Successfully');
                                                                    window.location.reload();
                                                                  } else alert('Woops there was a problem updating the profile');
                                                          }
                                                  );
                                          }
                                  }
                          }
            }
        function validSkills(skills) {
            var len = skills.split(",").length;
			return len > 0 || len < 10;
		}
      var httpReq = function(url, body, cb) {
              var xhr = new XMLHttpRequest();
              xhr.open('POST', url, true);
              xhr.setRequestHeader('Content-Type', 'application/json');
              xhr.send(JSON.stringify(body));
              xhr.onreadystatechange = function() {
                      if (xhr.readyState === 4) {
                              cb(xhr.status === 200, xhr.response);
                            }
                    }
            };
      var cropInstance = new Croppr('#profile-image-preview', {
              startSize: [100, 100, '%'],
              aspectRatio: 1,
            });
      document.getElementById("profile-image").addEventListener("change", function() {
              if (this.files && this.files[0]) {
                      if (['png', 'jpg', 'jpeg'].indexOf(this.files[0].name.split('.').pop()) === -1) {
                              alert('Only PNG, JPEG or JPG files are allowed');
                              return;
                            }
                      if (this.files[0].size > 5 * 1024 * 1024) {
                              alert('Max file size for company logo is 5MB');
                              return;
                            }
                      if (cropInstance) {
                              cropInstance.destroy();
                            }
                      var imgSrc = URL.createObjectURL(this.files[0]);
                      var img = document.getElementById("profile-image-preview");
                      img.style.display = "block";
                      img.src = imgSrc;
                      cropInstance = new Croppr('#profile-image-preview', {
                              startSize: [100, 100, '%'],
                              aspectRatio: 1,
                            });
                    }
            });
      function empty() {
              var isThere = true;
              for (var i = 0; i < arguments.length; i++) {
                      isThere &= typeof arguments[i] === "undefined" ? false : arguments[i].trim() !== "";
                    }
              return !isThere;
            };
      window.onclick = function(event) {
        var modal = document.getElementById("developerMetadataModal");
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }

      function openDeveloperMetadataModal(metadataType, title, description, link, metadataId) {
        const metadataTypeToPlaceholderMapping = {
          "experience": {
            "title": "Senior Software Engineer at Google",
            "link": "https://google.com",
            "description": "At Google, I served as a senior software engineer with ..."
          },
      		"github": {
      			"title": "Golang Job board",
      			"link": "https://github.com/golang-cafe/job-board",
      			"description": "Open-source Go contributor at Go-Lang cafe."
      		},
      		"education": {
            "title": "Computer Science at Harvard",
            "link": "https://www.harvard.edu/",
            "description": "Graduated from Harvard in 2020"
      		}
      	}
        var modal = document.getElementById("developerMetadataModal");
        if (metadataType) {
          document.getElementById("modalHeader").innerHTML = metadataType.toUpperCase();
          document.getElementById("metadataType").value = metadataType;
        }
        modal.style.display = "block";
        if (title) {
          document.getElementById("title").value = title;
        } else {
          document.getElementById("title").placeholder = metadataTypeToPlaceholderMapping[metadataType]["title"];
        }
        if (description) {
          document.getElementById("description").value = description;
        } else {
          document.getElementById("description").placeholder = metadataTypeToPlaceholderMapping[metadataType]["description"];
        }
        if (link) {
          document.getElementById("link").value = link.trim();
        } else {
          document.getElementById("link").placeholder = metadataTypeToPlaceholderMapping[metadataType]["link"];
        }
        if (metadataId) {
          document.getElementById("metadataId").value = metadataId
        }
      }

      function deleteDeveloperMetadata(id) {
        var body = {
          "developer_profile_id": document.getElementById('profile-id').value,
          "id": id
        }
        httpReq('/x/ddm', body, function(bool) {window.location.reload();})
      }

      function saveDeveloperMetadata() {
        var ID = document.getElementById("metadataId").value;
        var metadataType = document.getElementById("metadataType").value;
        var title = document.getElementById("title").value.trim();
        var description = document.getElementById("description").value.trim();
        var link = document.getElementById("link").value.trim();
        if (!isURL(link)) {
          alert('"Link" must be a valid URL');
          return;
        }
        if (empty(title, description)) {
          alert('Title or description cannot be empty');
          return;
        }
        var body = {
            "developer_profile_id": document.getElementById('profile-id').value,
            "metadata_type": metadataType,
            "title": document.getElementById("title").value,
            "description": document.getElementById("description").value,
            "link": document.getElementById("link").value
        }
        if (ID) {
            body["id"] = ID;
            httpReq('/x/udm', body, function(bool) {closeModal(); window.location.reload();}) 
        }
        else {
            httpReq('/x/sdm', body, function(bool) {closeModal(); window.location.reload();})
        }
      }

      function closeModal() {
        var modal = document.getElementById("developerMetadataModal");
        document.getElementById("title").value = ""
        document.getElementById("link").value = ""
        document.getElementById("description").value = ""
        document.getElementById("title").placeholder = ""
        document.getElementById("link").placeholder = ""
        document.getElementById("description").placeholder = ""

        modal.style.display = "none";
      }

    </script>

  </body>
</html>
